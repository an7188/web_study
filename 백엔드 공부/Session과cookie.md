### Session & cookie

1. http protocol의 특징

​	(1) client 가 server에 요청

​	(2) server는 요청에 대한 처리를 한 후 client에 응답

​	(3) 응답 후 연결을 해제 >> stateless

​			지속적인 연결로 인한 자원낭비를 줄이기 위해 연결을 해제한다.

​	

Cokkie : java.servlet.http.Cookie

​	서버에서 사용자의 컴퓨터에 저장하는 정보 파일	

​	사용자가 별도의 요청을 하지 않아도 브라우저는 request시 Request Header를 넣어 자동으로 서버에 전송

key 와 value로 구성되고 String형태로 이루어져 있음

브라우저 마다 저장돠는 쿠키는 다르다(서버에서는 브라우저가 다으면 다른 사용자로 인식)



쿠키의 사용 목정

세션관리: 사용자 아이디 , 접속시간 , 장바구니 등의 서버가 알아야 할 정보 저장

개인화 사용자마다 다르게 그 사람에 적절한 페이지를 보여줄 수 있다

트래킹 : 사용자의 행동과 패턴을 분석하고 기록



쿠키의 구성 요소

​	이름 : 여러개의 쿠키가 client의 컴퓨터에 저장되므로 각 쿠키를 구별하는데 사용되는 이름

​	값 : 쿠키의 이름과 매핑되는 값

​	유효기간 : 쿠키의 유효기간

도메인 : 쿠키를 전송할 도메인

경로 : 쿠키를 전송할 요청 경로





쿠키 동작 순서

​	Client가 페이지를 요청

​	was는 cookie를 생성

​	http header에 cookie를 넣어 응답

​	Browser는 넘겨 받은 쿠키를 pc에 저장하고 다시 was가요청할 때 요청과 함께 cookie를 전송

​	Browser가 종료되어도 cookie의 만효 기간이 남아 있가면 client는 계속 보관

​	동일 사이트 재방문시 client 의 pc에 해당 cookie가 있는 경우, 요청 페이지와 함께 cookie전송



Cookie의 특징

​	 이름, 값, 만료일, 경로 정보로 구성되어있다.

클라이언트에 총 300개의 쿠키를 저장할 수 있다.( 브라우저나 환경에 따라 다를 수 있다.)

하나의 도메인 당 20 개의 쿠키를 가질 수 있다.

하나의 쿠키는 4kb(=4096byte)까지 저장 가능







Session: javax.servlet.http.HttpSession

​	방문자가 웹서버에 접속해 있는 상태를 하나의 단위를 보고 그것을 세션이라고 한다.

​	WAS의 memory에 object의 형태로 저장

memory가 허용하는 용량까지 제한 없이 저장 가능























